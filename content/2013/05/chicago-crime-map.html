
---
title: Chicago Crime vs. Temperature Map
description: An attempt at getting some crime data and some weather data together on the same page
created: !!timestamp '2013-05-05 20:301:00'
tags:
    - Chicago
    - Python
    - S3
    - AWS
    - Crime
    - Maps
---
{% mark excerpt %}

Like many other civic minded hackers in the city, I was pretty excited to see the recent launch of the Chicago Police Department’s [open data API](http://api1.chicagopolice.org/clearpath/documentation). After a couple weekend hacks, I’m also pretty excited to announce my own attempt at putting something basic together that leverages that data and displays it alongside a daily temperature summary. Right now, it doesn’t really have a name (I’m horrible at naming things), but you can take a look at it [over here](http://crime.static-eric.com).

{% endmark %} 

One of the things I hear every year is that as the temperature goes up in Chicago, so does the crime rate. So, I thought I’d put together a tool that gave me an easy way to compare the temperature to the number and types of reported crimes for a given day. So, I downloaded the full CSV dump of [all 5,000,000+ reported crimes](https://data.cityofchicago.org/Public-Safety/Crimes-2001-to-present/ijzp-q8t2) in Chicago since 2001, headed over to the [NOAA](http://www.ncdc.noaa.gov/cdo-web/#t=secondTabLink) and got a dump of weather data since 2001, loaded them both into a MongoDB and started to see what I could see.

Technically, there were really not too many hurdles to overcome. MongoDB ships with a handy dandy method for [importing csv data directly into a database](http://docs.mongodb.org/manual/reference/mongoimport/#usage), so, with a little patience (the crime data took around 5 hours to load), I was able to get everything loaded pretty easily. I made a couple indexes to make things work a it quicker and, for the crime data, created a “Location” field that contained a GeoJSON object (cause that’s how MongoDB [does things these days](http://docs.mongodb.org/manual/core/2dsphere/)). 

But really, all I wanted to do with MongoDB was to clean up the data and make it ready for the final output, flat JSON files. My reasoning for this is that I wanted to run the app entirely from an S3 bucket without any server-side anything. I’m not sure how far I’ll be able to push this but it works for now. There are obvious downsides like not being able to query stuff very well but, for now, I just wanted something that offered kind of a fire hose view that you could browse through and maybe pull some threads out of.

My intention is to update this every day when there is new data crime available (which, according to the docs is once a day, Tuesday—Sunday). I’m hoping that I can actually make this a bit more automated but for now, I’ve just written a [couple scripts](https://github.com/evz/crimesaroundus) that handle the heavy lifting but will need to be triggered daily. The other sorta lame thing is that the MongoDB is in a VM on my laptop. I’d love to share it with someone and/or figure out an easy way to back it up that won’t be too pricy (although I’ll probably just suck it up and put it in S3 or something).

Anyways, I’m interested in feedback. Features, ideas, etc are all welcome.