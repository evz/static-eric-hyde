<!doctype html>
<!-- https://github.com/paulirish/html5-boilerplate/blob/master/index.html -->
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
    <meta charset="">
  <meta http-equiv="X-UA-Compatible" content="">
  <title>OMG FREE HOSTING: An homage to Harper Reed</title>
  <meta name="description" content="Configuring a static site on Google AppEngine">
  <meta name="author" content="Eric van Zanten">
  <meta name="viewport" content="">

    <!-- Place favicon.ico & apple-touch-icon.png
        in the root of your domain and delete these references -->
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
    <link rel="stylesheet" href="/media/css/style.css">
  
    <!-- All JavaScript at the bottom, except for Modernizr which
        enables HTML5 elements & feature detects -->
    <script src="/media/js/libs/modernizr-1.7.min.js"></script>
    </head>
<body id="omg-free-hosting-an-homage-to-harper-reed">
    <div id="container">
            <div id="main" role="main">
          <header id="header" class="banner clearfix">
          <h1 id="blog-title"><a href="">Eric van Zanten - Statically</a></h1>
            <h2 class="breadcrumb"><!-- Figure out breadcrumbs--></h2>          </header>
          <section id="wrapper" class="content">
          <div id="left-col">
                        <div id="menu">
                <ul>
                    <li class="page_item"><a title="About this site" href="/about-this-site.html">About this site</a></li>
                </ul>
            </div>
                        <div id="sidebar">
                <div id="feed-container">
                    <p><a id="feed_link" href="http://feeds.feedburner.com/static-eric">Subscribe to the RSS Feed</a></p>
                </div>
                <div class="widget static-widget">
    			<h3 class="widgettitle plus">Search</h3>
                <form id="searchform" style="display: none;">
                <div><input type="text" id="s" name="s"><input type="button" value="Search" id="searchsubmit"></div>
                </form>
                </div>
            </div>
          </div>
          <div id="right-col">
              <article class="post">
<h1 class="posttitle">OMG FREE HOSTING: An homage to Harper Reed</h1>
<time class="post-author" datetime="2011-10-22">
    Posted: Sat, 22 Oct 2011
</time>
<a href="http://twitter.com/share"
    class="twitter-share-button"
    data-count="horizontal"
    data-via="evanzanten">Tweet</a>
    <script type="text/javascript"
        src="http://platform.twitter.com/widgets.js"></script>
<div class="entry">
<p><strong>Update 3/2/2012</strong> If anyone out there is a tinkerer, they probably know that well enough is never enough. Since I wrote this all those months ago, I&rsquo;ve actually totally changed the brains behind this site to use an entirely different and, in my opinion, much cleaner approach involving <a href="http://hyde.github.com/">Hyde</a> and an S3 bucket. And that&rsquo;s about&nbsp;it.</p>
<p>Back in January, I read <a href="http://www.nata2.org/2011/01/26/how-to-use-app-engine-to-host-static-sites-for-free/">this</a> and thought it was a pretty cool idea. For some reason, I just kinda filed it away and didn&rsquo;t really think about it until sometime in the early morning hours of October 22 when I got the urge to write about <a href="2010-census-leveraging-whats-already-been-done.html">this</a> but didn&rsquo;t really have anywhere to do it.  Add to that the fact that I my brain starts hurting when I start to see the long road of configuring and deploying a site, whatever the platform. I just wanted something that would kinda be there, look presentable out of the box, and not have anything to do with&nbsp;<span class="caps">PHP</span>. </p>
<p>What I came up with looks a little like&nbsp;this:</p>
<ol>
<li>WordPress stack running locally on a <a href="http://vagrantup.com/">Vagrant <span class="caps">VM</span></a> (<span class="caps">OK</span>, <span class="caps">OK</span>, so, there is a bit of&nbsp;<span class="caps">PHP</span>)</li>
<li><a href="http://wordpress.org/extend/plugins/really-static/">Really Static</a> WordPress plugin to render content as flat&nbsp;<span class="caps">HTML</span></li>
<li>A bit of symlink magic to get all the necessary static files from the theme and the flat <span class="caps">HTML</span> files into one&nbsp;directory</li>
<li>A <a href="https://github.com/evz/static-eric">Github repo</a> where I push all the junk from above and a post-receive hook to sync it with&nbsp;AppEngine</li>
<li><a href="http://drydrop.binaryage.com/">Drydrop</a> to setup the Google AppEngine&nbsp;project</li>
</ol>
<p>In the end, it was pretty simple. Probably because I insist on only skimming the directions when setting these things up, I did run into a few pitfalls which I&rsquo;ll share&nbsp;here.</p>
<p><strong>AppEngine and DryDrop&nbsp;setup</strong></p>
<p>When you actually get into it, AppEngine is pretty nifty. Breaking into it by trying to use it for something that it wasn&rsquo;t really meant to do is not something I recommend unless you&rsquo;re smarter than me (<a href="http://www.python.org/dev/peps/pep-0020/">or Dutch,</a> apparently). It&rsquo;s kinda like watching a movie from the other side of the screen, or something. After downloading DryDrop, it took me quite a while to figure out that it expected you to have the AppEngine <span class="caps">SDK</span> setup in the way that it gets setup when you install it on <span class="caps">OS</span> X. DryDrop looks for the <span class="caps">SDK</span> files in /usr/local and if you&rsquo;re trying to make this work on something like Ubuntu, you either need to take that into account, or just get a Mac. Once you get over that, DryDrop works like a charm. Oh, and, it seems that if you want to use a custom domain with your AppEngine account, you&rsquo;ve got to set it up on Google Apps, which is also free, but it&rsquo;s yet another&nbsp;hassle.</p>
<p>The other big, big thing that I ran into was the way that AppEngine is very literal when it comes to static content. The way that the Really Static plugin spits out content is the way that you&rsquo;d expect it to if you were going to be hosting it on a box using Apache or something. So, to fake the pretty URLs, it makes a folder with an index.html file inside (which something like Apache would use by default when serving that <span class="caps">URL</span>). AppEngine is not Apache. What I finally came up with was to put this into the DryDrop site.yaml (which is kind of a slimmed down version of the normal app.yaml that AppEngine normally&nbsp;uses).</p>
<pre><code>handlers:
- url: /(.*)/(.*)/(.*)/(.*)/
static_files: \1/\2/\3/\4/index.html
upload: .*/.*/.*/.*/index\.html
- url: /(.*)/(.*)/(.*)/
static_files: \1/\2/\3/index.html
upload: .*/.*/.*/index\.html
- url: /(.*)/(.*)/
static_files: \1/\2/index.html
upload: .*/.*/index\.html
- url: /(.*)/
static_files: \1/index.html
upload: .*/index\.html
- url: '/'
static_files: 'index.html'
upload: '.*'
- url: '/'
static_dir: '/'
</code></pre>
<p>It&rsquo;s kinda hacky, but it works. It basically uses the regexes to find the appropriate index.html files so that I can keep my pretty&nbsp;URLs.</p>
<p><strong>WordPress</strong></p>
<p>I struggle with Apache. I&rsquo;m allergic to <span class="caps">PHP</span>. But my fear/loathing of fiddling with <span class="caps">UI</span> stuff for my own personal outweighs that so I went and grabbed <a href="http://www.apachefriends.org/en/xampp.html"><span class="caps">XAMPP</span></a> and segregated my WordPress installation onto it&rsquo;s own little <span class="caps">VM</span>. That way if I get really pissed off and just can&rsquo;t take it anymore, I can do <code>vagrant destroy</code> and then it will know who&rsquo;s boss. I tried a bunch of different ways of getting flat <span class="caps">HTML</span> out of WordPress but the Really Static plugin was by far the best. It&rsquo;s one of those things that just kinda works. For those of you out there that are looking to make WordPress really, really fast by static-ifying it, this plugin not only creates the flat files for you, but will change the links to use a different domain and upload them to a remote server all when ever the database is changed. So, uh, I&rsquo;m not sure why anyone would put up with hosting a WordPress site anymore. Oh, there is that one&nbsp;thing:</p>
<p><strong>Search</strong></p>
<p>This is the one thing I have yet to figure out. I&rsquo;m looking at using <a href="http://tapirgo.com/">Tapir</a>, but that involves building an <span class="caps">RSS</span> feed which is possible for a flat site but I&rsquo;ll need to figure out a way to put this into my workflow so that it isn&rsquo;t a pain in the ass. In the meantime, I&rsquo;m not too worried about it cause there&rsquo;s only like 2 posts and a page. So, you&rsquo;re on your own&nbsp;there.</p>
<p>I suppose this is just the beginning. I&rsquo;m hoping this is a sustainable solution and Google doesn&rsquo;t catch on and start charging me cause it&rsquo;s pretty&nbsp;slick.</p></div>
<div class="post-metadata alt">
    <p><strong>Tags: </strong>
    <a class="small" href="/blog/tags/Google.html">
        Google
    </a>
    <a class="small" href="/blog/tags/AppEngine.html">
        AppEngine
    </a>
    <a class="small" href="/blog/tags/WordPress.html">
        WordPress
    </a>
    <a class="small" href="/blog/tags/Droplet.html">
        Droplet
    </a>
</p>
</article>          </div>
          <footer id="footer">
              Copyright &copy; 2012 Eric van Zanten,  Powered by <a href="http://ringce.com/hyde">hyde</a>.
          </footer>
      </div>
      </div> <!--! end of #container -->
      <!-- Javascript at the bottom for fast page loading -->
    <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if necessary -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.js"></script>
  <script>window.jQuery || document.write('<script src="js/libs/jquery-1.5.1.min.js">\x3C/script>')</script>
  
    

  <!--[if lt IE 7 ]>
    <script src="js/libs/dd_belatedpng.js"></script>
    <script>DD_belatedPNG.fix('img, .png_bg'); // Fix any <img> or .png_bg bg-images. Also, please read goo.gl/mZiyb </script>
  <![endif]-->

      
  </body>
</html>